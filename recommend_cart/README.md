# recommend.py 함수 코드 설명

### GET /recommend

해당 함수는 사용자의 포즈분석 결과를 바탕으로, 사용자에게 정보를 제공해주고, 포즈 추천을 제공해주는 페이지에 활용되는 엔드포인트 입니다.

PyMySQL을 활용하여, RDS의 MySQL에 쿼리하여 데이터를 가져옵니다.

사용자의 사진 분위기, 포즈의 통계를 저장하는 테이블에서 사용자가 가장 적게한 포즈/분위기의 횟수와, 포즈/분위기 이름을 쿼리합니다.

그리고 DynamoDB에서 해당 포즈와 분위기를 모두 만족하는 이미지를 스캔하여 사용자에게 반환합니다.

클라이언트에서 HTTP header에 JWT토큰을 담아서 요청을 보내면, 이를 검증하고 로직을 수행하는 함수입니다.

RDS와 해당 Lambda함수를 동일한 VPC에 배치시켜 사용하면, Lambda함수에서 VPC밖에있는 DynamoDB를 사용할 수 없는 Issue가 있었습니다. 이를 해결하기 위해 VPC Endpoint를 생성하여 DynamoDB에 접근할 수 있도록 구현하였습니다.
